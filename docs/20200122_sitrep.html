<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>A Forecasting Study on Short Term Natural Gas Prices </title>
    <meta charset="utf-8" />
    <meta name="author" content="Jonathan Berrisch" />
    <link href="20200122_sitrep_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <script src="20200122_sitrep_files/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="20200122_sitrep_files/jquery-1.12.4/jquery.min.js"></script>
    <link href="20200122_sitrep_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="20200122_sitrep_files/datatables-binding-0.10/datatables.js"></script>
    <link href="20200122_sitrep_files/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="20200122_sitrep_files/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="20200122_sitrep_files/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
    <link href="20200122_sitrep_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="20200122_sitrep_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } },
      });
    </script>
    <style>
    .mjx-mrow a {
      color: black;
      pointer-events: none;
      cursor: default;
    }
    </style>
    <link rel="stylesheet" href="assets/sydney-fonts.css" type="text/css" />
    <link rel="stylesheet" href="assets/sydney.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# A Forecasting Study on Short Term Natural Gas Prices <svg style="height:0.8em;top:.04em;position:relative;fill:#007bff;" viewBox="0 0 384 512"><path d="M192 0C79.7 101.3 0 220.9 0 300.5 0 425 79 512 192 512s192-87 192-211.5c0-79.9-80.2-199.6-192-300.5zm0 448c-56.5 0-96-39-96-94.8 0-13.5 4.6-61.5 96-161.2 91.4 99.7 96 147.7 96 161.2 0 55.8-39.5 94.8-96 94.8z"/></svg>
## Master Thesis in Economics
### Jonathan Berrisch
### 22.01.2020

---




class:

# Goal

&lt;br&gt;
&lt;br&gt;

- Develop a Forecasting Model for natural gas prices
- Focus on Day-Ahead prices
- The Model should build on theoretical foundations
- Potentially gain insights
- Check the performance of ANN's

---

# Data Overview

<div id="htmlwidget-20bde3c123e90e4b879c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-20bde3c123e90e4b879c">{"x":{"filter":"none","autoHideNavigation":true,"data":[["1","2","3","4","5","6","7","8"],["2019-10-31","2019-11-01","2019-11-02","2019-11-03","2019-11-04","2019-11-05","2019-11-06","2019-11-07"],[9.45,10.634,null,null,11.609,13.811,13.491,13.659],[9.863,10.981,null,null,12.038,14.237,13.998,14.147],[9.149,10.053,null,null,11.203,13.453,13.161,13.402],[11.723,13.374,null,null,14.483,16.162,15.962,15.925],[23.171,25.451,null,null,28.795,33.677,33.243,33.931],[9.425,9.425,null,null,11.306,13.15,13.168,13.39],[9.72,10.389,null,null,11.592,13.674,13.571,13.707],[10.354,11.308,null,null,12.503,14.325,14.008,14.165],[10.325,11.025,10.8,11.55,12.975,13.3,13.3,14.4]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CALC_DATE<\/th>\n      <th>ttf<\/th>\n      <th>ncg<\/th>\n      <th>peg<\/th>\n      <th>psv<\/th>\n      <th>zee<\/th>\n      <th>ztp<\/th>\n      <th>gpi<\/th>\n      <th>vtp<\/th>\n      <th>reg_133<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

# Data Summary

&lt;br&gt;
&lt;br&gt;

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Variable &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; ttf &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; ncg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; peg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; psv &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; zee &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; ztp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gpi &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; vtp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; reg_133 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Min. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.69 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.18 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.68 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.95 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 1st Qu. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 38.93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.40 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Median &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.78 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.82 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.14 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 47.54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.54 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.73 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.00 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mean &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.20 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.39 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 48.59 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.05 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.87 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.82 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 3rd Qu. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23.72 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24.38 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24.07 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 26.77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 58.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24.27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24.60 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23.18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Max. &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.52 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49.81 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 48.92 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 65.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 158.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.38 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.97 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100.97 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Length &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3886.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3354.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2632.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2206.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2206.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 111.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3352.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2720.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5060.00 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Data Plot

&lt;br&gt;

.center[

&lt;img src="20200122_sitrep_files/figure-html/unnamed-chunk-4-1.png" width="1008" /&gt;

]

---

# Data Correlation

&lt;br&gt;

.center[

&lt;img src="20200122_sitrep_files/figure-html/unnamed-chunk-5-1.png" width="1008" /&gt;

]

---

# Data Distribution

&lt;br&gt;

.center[
  
&lt;img src="20200122_sitrep_files/figure-html/unnamed-chunk-6-1.png" width="1008" /&gt;

]

---

# Methodology

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

- Crossvalidation problem
- One step ahead forecasts
- MAE vs. RMSE

---

# Expanding Window

&lt;br&gt;

.center[

&lt;img src="assets/cv_expanding.png" width="80%" /&gt;

]

---

# Models

.pull-left[

### Benchmark Model

Prediction equals most recent price.

`\begin{align}
y_t = y_{t-1} + \epsilon_t
\end{align}`

No estimation necessary.

### AR(P) model

Prediction depends on `\(c\)` and `\(P\)` Lags:

`\begin{align}
\mathbb{E}(Y_t \mid \mathcal{I}_t) &amp;= c + \sum_{j=1}^p \phi_j Y_{t-j} \nonumber \\
\epsilon_t \sim \mathcal{N}(0,\,\sigma^{2})
\end{align}`

]

.pull-right[

### AutoRegressive Conditional Heteroscedasticity

Variance is assumed to be time dependend:

`\begin{align}
\mathbb{V}(Y_t \mid \mathcal{I}_t) = \sigma^2_t = \delta_0 + \sum_{l=1}^r \delta_j \sigma^2_{t-l}
\end{align}`

### AR-ARCH

(2) and (3) can be combined and estimated simultaniously which increases efficiency.

]

---

# Estimation

&lt;br&gt;

The preceding models can be estimated with OLS. Hence, minimizing the SSR. In consequence, we obtain mean predictions.

Mean predictions should be evaluated using the squared prediction error. We are using the RMSE here.


```r
# data.frame(Model = c("Naive", "AR(1), AR(3), AR_ARCH"), c(3.0314,2.9621, 2.5642,  ))
```


&lt;br&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="assets/remark-zoom.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
